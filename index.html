<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SUSPA Configurator</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        body { font-family: sans-serif; background: #f4f4f4; padding: 15px; color: #333; }
        .card { background: white; padding: 20px; border-radius: 12px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        h2 { color: #f39c12; margin-top: 0; }
        label { display: block; margin: 10px 0 5px; font-weight: bold; }
        select, input { width: 100%; padding: 10px; border: 1px solid #ccc; border-radius: 6px; box-sizing: border-box; }
        .info { background: #fffde7; padding: 10px; border-radius: 6px; margin-top: 15px; font-size: 0.9em; border-left: 4px solid #fbc02d; }
        #main-button { background: #f39c12; color: white; border: none; width: 100%; padding: 15px; border-radius: 8px; font-size: 16px; font-weight: bold; margin-top: 20px; cursor: pointer; }
    </style>
</head>
<body>

<div class="card">
    <h2>Конфигуратор SUSPA</h2>
    
    <label>Выберите серию:</label>
    <select id="series" onchange="updateSpecs()">
        <option value="16-1">Серия 16-1 (50-400N)</option>
        <option value="16-2">Серия 16-2 (80-750N)</option>
        <option value="16-4">Серия 16-4 (100-1200N)</option>
        <option value="16-6">Серия 16-6 (200-2000N)</option>
    </select>

    <label>Тип соединения:</label>
    <select id="connection">
        <option value="threaded">Резьбовое соединение</option>
        <option value="welded">Сварное соединение (Проушины)</option>
    </select>

    <label>Ход штока (мм):</label>
    <input type="number" id="stroke" placeholder="Например: 100">

    <label>Длина цилиндра (без учета резьбы, мм):</label>
    <input type="number" id="length" placeholder="Например: 150">

    <label>Требуемое усилие (N):</label>
    <input type="number" id="force" placeholder="Введите значение">

    <div class="info" id="spec-info">
        Выберите серию для просмотра ограничений.
    </div>

    <button id="main-button" onclick="sendData()">ОФОРМИТЬ ЗАКАЗ</button>
</div>

<script>
    let tg = window.Telegram.WebApp;
    tg.expand();

    const specs = {
        "16-1": { minF: 50, maxF: 400, rod: 6, tube: 15 },
        "16-2": { minF: 80, maxF: 750, rod: 8, tube: 18.5 },
        "16-4": { minF: 100, maxF: 1200, rod: 10, tube: 22 },
        "16-6": { minF: 200, maxF: 2000, rod: 14, tube: 28 }
    };

    function updateSpecs() {
        const s = document.getElementById('series').value;
        const info = specs[s];
        document.getElementById('spec-info').innerHTML = 
            `Серия ${s}: Шток Ø${info.rod}мм, Трубка Ø${info.tube}мм. <br>Допустимое усилие: ${info.minF} - ${info.maxF} Ньютонов.`;
    }

    function sendData() {
        const series = document.getElementById('series').value;
        const connection = document.getElementById('connection').value;
        const stroke = document.getElementById('stroke').value;
        const length = document.getElementById('length').value;
        const force = parseInt(document.getElementById('force').value);

        const limit = specs[series];

        if (!stroke || !length || !force) {
            alert("Пожалуйста, заполните все поля");
            return;
        }

        if (force < limit.minF || force > limit.maxF) {
            alert(`Для серии ${series} усилие должно быть от ${limit.minF} до ${limit.maxF}N`);
            return;
        }

        const data = {
            series: series,
            connection: connection === 'threaded' ? 'Резьба' : 'Сварка',
            stroke: stroke,
            length: length,
            force: force
        };

        tg.sendData(JSON.stringify(data));
    }

    updateSpecs(); // Инициализация при загрузке
</script>
</body>
</html>
